<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{ title }} | Six Senses</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico" />
    <link rel="stylesheet" href="static/css/style.css" />
    <link rel="manifest" href="manifest.webmanifest" />
    <script>
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
          navigator.serviceWorker.register("./sw.js", { scope: "./" });
        });
      }
    </script>
    <link rel="stylesheet" href="static/fonts/inter-local.css" />
  </head>
  <body>
    <header id="main-header">
      <div class="header-content">
        <button
          id="menu-toggle"
          class="toggle-button menu-toggle"
          aria-label="Toggle menu"
          data-tooltip="Show/Hide Menu"
        >
          <img
            src="static/images/menu-icon.svg"
            alt="Menu"
            class="menu-icon"
            width="20"
            height="20"
          />
        </button>
        <img
          src="static/images/six-senses.svg"
          alt="Six Senses Logo"
          class="logo"
        />
        <span class="course-title">Meditation Course on the Six Senses</span>
        <div class="toggles">
          <button
            id="theme-toggle"
            class="toggle-button"
            aria-label="Toggle theme"
            data-tooltip="Light/Dark Mode"
          >
            <img
              src="static/images/theme-icon.svg"
              alt="Theme"
              class="theme-icon"
              width="20"
              height="20"
            />
          </button>
          <button
            id="status-toggle"
            class="toggle-button"
            aria-label="Toggle offline mode"
            data-tooltip="Online/Offline Mode"
          >
            <img
              src="static/images/status-icon.svg"
              alt="Status"
              class="status-icon"
              width="20"
              height="20"
            />
          </button>
        </div>
      </div>
    </header>

    <div class="page-container">
      <aside class="sidebar-left">
        <nav>
          <h3>Course Outline</h3>
          <ul>
            {% for page in all_pages %}
            <li><a href="{{ page.path }}">{{ page.title }}</a></li>
            {% endfor %}
          </ul>
        </nav>
      </aside>

      <main class="main-content">{% block content %}{% endblock %}</main>

      <aside class="sidebar-right">
        <nav id="on-page-toc">
          <h3>On This Page</h3>
          <ul>
            <!-- To be populated by JavaScript -->
          </ul>
        </nav>
      </aside>
    </div>

    <footer>
      <div class="footer-nav">
        {% if prev_page %}
        <a href="{{ prev_page.path }}" class="prev-page">
          &larr; {{ prev_page.title }}
        </a>
        {% endif %} {% if next_page %}
        <a href="{{ next_page.path }}" class="next-page">
          {{ next_page.title }} &rarr;
        </a>
        {% endif %}
      </div>
    </footer>

    <script src="static/js/main.js"></script>
  </body>
</html>
